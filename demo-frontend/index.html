<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThermoNet - Temperature Oracle Demo</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 20px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card h3 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .stat-card p {
            color: #666;
            font-weight: 500;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .map-container {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .map-container h2 {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.5rem;
        }
        
        #map {
            height: 500px;
            border-radius: 15px;
        }
        
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .chart-container {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .chart-container h3 {
            margin-bottom: 15px;
            color: #333;
        }
        
        .activity-feed {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            max-height: 400px;
            overflow-y: auto;
        }
        
        .activity-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .activity-text {
            flex: 1;
        }
        
        .activity-time {
            color: #999;
            font-size: 0.9rem;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .temperature-marker {
            background: radial-gradient(circle, rgba(102, 126, 234, 0.8) 0%, rgba(102, 126, 234, 0.3) 100%);
            border: 2px solid #667eea;
            border-radius: 50%;
            width: 20px;
            height: 20px;
        }
        
        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå°Ô∏è ThermoNet</h1>
            <p>Crowdsourced Temperature Oracle for Solana Mobile</p>
            <div class="pulse" style="display: inline-block; padding: 10px 20px; background: rgba(102, 126, 234, 0.1); border-radius: 25px; color: #667eea; font-weight: 600;">
                üî¥ LIVE DEMO - Real-time Temperature Network
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <h3 id="device-count">152</h3>
                <p>Active Devices</p>
            </div>
            <div class="stat-card">
                <h3 id="reading-count">21.8K</h3>
                <p>Total Readings</p>
            </div>
            <div class="stat-card">
                <h3 id="avg-temp">22.3¬∞C</h3>
                <p>Average Temperature</p>
            </div>
            <div class="stat-card">
                <h3 id="tokens-earned">304K</h3>
                <p>TEMP Tokens</p>
            </div>
        </div>
        
        <div class="content-grid">
            <div class="map-container">
                <h2>üó∫Ô∏è Real-time Temperature Map</h2>
                <div id="map"></div>
            </div>
            
            <div class="sidebar">
                <div class="chart-container">
                    <h3>üìà Temperature Trend</h3>
                    <canvas id="tempChart" width="300" height="200"></canvas>
                </div>
                
                <div class="activity-feed">
                    <h3>üì° Recent Activity</h3>
                    <div id="activity-list">
                        <!-- Activity items will be added by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize map
        const map = L.map('map').setView([37.7749, -122.4194], 11);
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);
        
        // Generate mock temperature data
        function generateTemperatureData() {
            const data = [];
            const center = [37.7749, -122.4194];
            
            for (let i = 0; i < 150; i++) {
                const lat = center[0] + (Math.random() - 0.5) * 0.3;
                const lng = center[1] + (Math.random() - 0.5) * 0.3;
                const temp = 15 + Math.random() * 15;
                
                data.push({
                    lat: lat,
                    lng: lng,
                    temperature: Math.round(temp * 10) / 10,
                    deviceId: `DX${Math.random().toString(36).substr(2, 4).toUpperCase()}`
                });
            }
            
            return data;
        }
        
        // Get temperature color
        function getTemperatureColor(temp) {
            if (temp < 10) return '#3b82f6';
            if (temp < 15) return '#06b6d4';
            if (temp < 20) return '#10b981';
            if (temp < 25) return '#f59e0b';
            if (temp < 30) return '#ef4444';
            return '#dc2626';
        }
        
        // Add temperature markers to map
        let temperatureData = generateTemperatureData();
        
        temperatureData.forEach(point => {
            const marker = L.circleMarker([point.lat, point.lng], {
                radius: 8,
                fillColor: getTemperatureColor(point.temperature),
                color: '#ffffff',
                weight: 2,
                opacity: 1,
                fillOpacity: 0.8
            }).addTo(map);
            
            marker.bindPopup(`
                <div style="text-align: center; padding: 10px;">
                    <h4 style="color: #667eea; margin-bottom: 10px;">Temperature Reading</h4>
                    <div style="font-size: 24px; font-weight: bold; color: ${getTemperatureColor(point.temperature)};">
                        ${point.temperature}¬∞C
                    </div>
                    <div style="margin-top: 10px; color: #666;">
                        Device: ${point.deviceId}<br>
                        Location: ${point.lat.toFixed(4)}, ${point.lng.toFixed(4)}<br>
                        Time: ${new Date().toLocaleTimeString()}
                    </div>
                </div>
            `);
        });
        
        // Initialize temperature chart
        const ctx = document.getElementById('tempChart').getContext('2d');
        const tempChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Temperature (¬∞C)',
                    data: [],
                    borderColor: '#667eea',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 15,
                        max: 30
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
        
        // Add initial chart data
        const now = new Date();
        for (let i = 11; i >= 0; i--) {
            const time = new Date(now.getTime() - i * 60000);
            const temp = 20 + Math.sin(i / 2) * 3 + (Math.random() - 0.5) * 2;
            tempChart.data.labels.push(time.toLocaleTimeString());
            tempChart.data.datasets[0].data.push(Math.round(temp * 10) / 10);
        }
        tempChart.update();
        
        // Activity feed data
        const activities = [
            { icon: 'üå°Ô∏è', text: 'New temperature reading: 23.4¬∞C', time: '2 min ago' },
            { icon: 'üì±', text: 'Device DX7K9 came online', time: '5 min ago' },
            { icon: 'ü™ô', text: '150 TEMP tokens distributed', time: '8 min ago' },
            { icon: 'üî•', text: 'High temperature detected: 35.2¬∞C', time: '12 min ago' },
            { icon: 'üìä', text: 'Hex tile aggregation completed', time: '15 min ago' },
            { icon: 'üîó', text: 'Blockchain sync successful', time: '18 min ago' }
        ];
        
        function updateActivityFeed() {
            const activityList = document.getElementById('activity-list');
            activityList.innerHTML = '';
            
            activities.forEach((activity, index) => {
                const item = document.createElement('div');
                item.className = 'activity-item';
                item.innerHTML = `
                    <div class="activity-icon">${activity.icon}</div>
                    <div class="activity-text">
                        <div>${activity.text}</div>
                        <div class="activity-time">${activity.time}</div>
                    </div>
                `;
                activityList.appendChild(item);
            });
        }
        
        // Real-time updates
        function updateStats() {
            document.getElementById('device-count').textContent = 150 + Math.floor(Math.random() * 10);
            document.getElementById('reading-count').textContent = (21.8 + Math.random() * 0.5).toFixed(1) + 'K';
            document.getElementById('avg-temp').textContent = (22.3 + (Math.random() - 0.5) * 2).toFixed(1) + '¬∞C';
            document.getElementById('tokens-earned').textContent = Math.floor(304 + Math.random() * 10) + 'K';
        }
        
        function updateChart() {
            const now = new Date();
            const newTemp = 20 + Math.sin(Date.now() / 60000) * 3 + (Math.random() - 0.5) * 2;
            
            tempChart.data.labels.push(now.toLocaleTimeString());
            tempChart.data.datasets[0].data.push(Math.round(newTemp * 10) / 10);
            
            if (tempChart.data.labels.length > 12) {
                tempChart.data.labels.shift();
                tempChart.data.datasets[0].data.shift();
            }
            
            tempChart.update();
        }
        
        // Initialize activity feed
        updateActivityFeed();
        
        // Start real-time updates
        setInterval(updateStats, 3000);
        setInterval(updateChart, 5000);
        setInterval(() => {
            activities.unshift({
                icon: ['üå°Ô∏è', 'üì±', 'ü™ô', 'üìä'][Math.floor(Math.random() * 4)],
                text: [
                    `New temperature reading: ${(15 + Math.random() * 15).toFixed(1)}¬∞C`,
                    `Device DX${Math.random().toString(36).substr(2, 3).toUpperCase()} came online`,
                    `${Math.floor(100 + Math.random() * 200)} TEMP tokens distributed`,
                    `Hex tile updated with ${Math.floor(5 + Math.random() * 10)} readings`
                ][Math.floor(Math.random() * 4)],
                time: 'Just now'
            });
            
            if (activities.length > 6) activities.pop();
            updateActivityFeed();
        }, 8000);
        
        console.log('üå°Ô∏è ThermoNet Demo loaded successfully!');
        console.log('üìä Showing 150+ simulated temperature sensors');
        console.log('üó∫Ô∏è Interactive map with real-time updates');
        console.log('üíé Beautiful UI with live data visualization');
    </script>
</body>
</html>
